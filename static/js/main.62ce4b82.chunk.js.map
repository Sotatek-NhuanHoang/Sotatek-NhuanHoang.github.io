{"version":3,"sources":["../../SharedResource/SocketServerEvents.js","../../SharedResource/SocketClientEvents.js","config/index.js","socket/UserHandler.js","api/BaseApi.js","api/RoomApi.js","service/AlertService.js","store/match.js","store/room.js","socket/RoomHandler.js","socket/MatchHandler.js","store/score.js","socket/ScoreHandler.js","socket/index.js","api/UserApi.js","store/user.js","store/store.js","service/SpinnerService.js","screens/LoginScreen/LoginScreen.js","screens/RoomScreen/CreatorName.js","screens/RoomScreen/RoomItem.js","screens/RoomScreen/RoomScreen.js","screens/MatchScreen/CaroBoardSquare.js","screens/MatchScreen/CaroBoard.js","screens/MatchScreen/UserScore.js","screens/MatchScreen/CompetitorUser.js","screens/MatchScreen/CurrentUser.js","screens/MatchScreen/MatchScreen.js","Router.js","App.js","index.js","socket/combineHandlers.js","../../SharedResource/RoomStatus.js","../../SharedResource/ServerError.js","assets/images/o.png","assets/images/x.png"],"names":["module","exports","user_AUTHENTICATED","user_UNAUTHENTICATED","room_ADD_NEW","room_REMOVE","room_UPDATE","room_JOIN","room_EXIT","match_STROKE","match_READY_NEW_GAME","score_UPDATE","user_AUTHENTICATE","user_LOGOUT","match_WIN","SquareType","X","O","Config","API_SERVER_URL","API_SERVER_VERSION","SOCKET_SERVER_URL","CARO_BOARD_ROW","CARO_BOARD_COLUMN","FIRST_MOVE_SQUARE_TYPE","SECOND_MOVE_SQUARE_TYPE","ScoreHandler","eventName","params","SocketServerEvents","dispatch","user_UPDATE_STATE","isSocketAuthenticated","isSocketAuthenticating","Api","create","baseURL","headers","Accept","Content-Type","BaseApi","GET","_GET","Object","asyncToGenerator","regenerator_default","a","mark","_callee","endPoint","_store$getState","user","token","response","_args","arguments","wrap","_context","prev","next","length","undefined","store","getState","_","get","Authorization","sent","ok","Error","data","message","abrupt","t0","stop","_x","apply","this","POST","_POST","_callee2","_store$getState2","_args2","_context2","post","_x2","PUT","_PUT","_callee3","_store$getState3","_args3","_context3","put","_x3","DELETE","RoomApi","getRooms","page","createRoom","joinRoom","roomId","alertOptions","theme","timeout","layout","progressBar","showError","msg","Noty","objectSpread","type","text","show","defaultState","firstMoveUserId","winnerId","isCurentUserTurn","squares","lastSquareIndex","winningSquares","currentUserReadyNewGame","competitorUserReadyNewGame","checkHorizontal","row","column","rootSquareType","boardRow","boardColumn","defineProperty","i","squareIndex","keys","checkVertical","checkLeftBias","x","y","checkRightBias","checkWinningMatchFromIndex","squareType","checkers","match_RESET","createAction","match_UPDATE_STATE","reducer","handleActions","state","_ref2","payload","cloneDeep","_ref3","fromJS","mergeDeep","toJS","squareSelector","createSelector","match","_ref4","winningSquareSelector","_ref5","room_UPDATE_STATE","removeIn","rooms","total","limit","isGettingRooms","getRoomsError","creatingRoom","createRoomError","currentRoomId","sortedRoomIdsSelector","room","currentUser","_ref6","availableRooms","filter","status","RoomStatus","WAITING","creatorUserId","id","sortedRooms","sortBy","updated","map","roomSelector","_ref7","RoomHandler","otherUsers","creatorUser","_id","competitorUser","_getState","competitorUserId","_ref","competitorSquareIndex","competitorSquareType","_getState2","nextMatch","_roomId","_getState3","_room","sleep","score_UPDATE_STATE","scores","scoreSelector","score","userId","rawScores","reduce","memo","item","socket","io","socketWildcard","Manager","eventHandler","combineHandlers","UserHandler","MatchHandler","on","emit","SocketClientEvents","_data","slicedToArray","UserApi","login","accessToken","facebookId","isLogging","loginError","user_RESET","otherUserSelector","reducers","combineReducers","global","globalReducer","roomReducer","persistReducer","key","storage","whitelist","userReducer","matchReducer","scoreReducer","middleWares","thunk","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","applyMiddleware","createStore","persistor","persistStore","showSpinner","document","getElementById","overlayElement","createElement","body","appendChild","ReactDOM","render","react_default","className","react_spinners","color","size","hideSpinner","remove","LoginScreen","props","history","push","prevProps","_this","FB","getLoginStatus","authResponse","userID","_login","_this2","onClick","onLoginButtonPressed","PureComponent","connect","username","avatar","user_LOGIN","CreatorName","ownProps","RoomItem","onRoomItemClicked","_joinRoom","RoomScreen_CreatorName","joinedRoom","_x4","room_JOIN_ROOM","RoomScreen","trackScrolling","wrappedElement","isBottom","_getRooms","onNewRoomButtonClicked","_createRoom","onLogoutButtonClicked","_logout","_socketAuthenticate","addEventListener","console","log","ServerError","UNAUTHENTICATED","removeEventListener","el","getBoundingClientRect","bottom","innerHeight","_this$props","roomIds","RoomScreen_RoomItem","loading","totalRooms","shouldRefresh","rawRooms","rawCreatorUsers","creatorUsers","room_GET_ROOMS","newRoom","CaroBoardSquare","stroke","_stroke","renderXO","react","alt","src","oImage","xImage","_this$props2","isWinningSquare","isLastSquare","classNames","square-winning","square-last-index","currentRoom","CaroBoard","Array","rowIndex","col","columnIndex","screens_MatchScreen_CaroBoardSquare","UserScore","CompetitorUser","MatchScreen_UserScore","CurrentUser","MatchScreen","onBackButtonPressed","_exitRoom","onExitRoomButtonClicked","_playNewGame","_reMatch","title","_ref$confirmText","confirmText","onConfirm","_ref$cancelText","cancelText","onCancel","confirmAlert","buttons","label","showConfirmAlert","screens_MatchScreen_CaroBoard","screens_MatchScreen_CompetitorUser","screens_MatchScreen_CurrentUser","_getState4","Router","HashRouter","Route","path","exact","component","RoomsScreen","App","es","integration_react","Router_Router","Component","src_App","setImmediate","handlers","_loop","PLAYING","USER_NOT_FOUND","ROOM_FULL","__webpack_require__","p"],"mappings":"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","file":"static/js/main.62ce4b82.chunk.js","sourcesContent":["module.exports = {\n  user_AUTHENTICATED: 'user_AUTHENTICATED',\n  user_UNAUTHENTICATED: 'user_UNAUTHENTICATED',\n  room_ADD_NEW: 'room_ADD_NEW',\n  room_REMOVE: 'room_REMOVE',\n  room_UPDATE: 'room_UPDATE',\n  room_JOIN: 'room_JOIN',\n  room_EXIT: 'room_EXIT',\n  match_STROKE: 'match_STROKE',\n  match_READY_NEW_GAME: 'match_READY_NEW_GAME',\n  score_UPDATE: 'score_UPDATE'\n};","module.exports = {\n  user_AUTHENTICATE: 'user_AUTHENTICATE',\n  user_LOGOUT: 'user_LOGOUT',\n  room_EXIT: 'room_EXIT',\n  match_STROKE: 'match_STROKE',\n  match_READY_NEW_GAME: 'match_READY_NEW_GAME',\n  match_WIN: 'match_WIN'\n};","export const SquareType = {\n    X: 'X',\n    O: 'O',\n};\n\nconst Config = {\n    API_SERVER_URL: process.env.NODE_ENV === 'development' ? 'http://127.0.0.1:8080' : 'https://caro-api.herokuapp.com',\n    API_SERVER_VERSION: 'v1',\n    SOCKET_SERVER_URL: process.env.NODE_ENV === 'development' ? 'http://127.0.0.1:8083' : 'https://caro-socket.herokuapp.com',\n    CARO_BOARD_ROW: 30,\n    CARO_BOARD_COLUMN: 48,\n    FIRST_MOVE_SQUARE_TYPE: SquareType.X,\n    SECOND_MOVE_SQUARE_TYPE: SquareType.O,\n};\n\n\nexport default Config;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch } from 'caro-store';\nimport { user_UPDATE_STATE } from 'caro-store/user';\n\n\nconst ScoreHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.user_AUTHENTICATED: {\n            dispatch(user_UPDATE_STATE({\n                isSocketAuthenticated: true,\n                isSocketAuthenticating: false,\n            }));\n            break;\n        }\n\n        case SocketServerEvents.user_UNAUTHENTICATED: {\n            dispatch(user_UPDATE_STATE({\n                isSocketAuthenticated: false,\n                isSocketAuthenticating: false,\n            }));\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default ScoreHandler;","import { create } from 'apisauce';\nimport Config from 'caro-config';\nimport store from 'caro-store';\nimport _ from 'lodash';\n\n\nconst Api = create({\n    baseURL: Config.API_SERVER_URL + '/' + Config.API_SERVER_VERSION,\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n    },  \n});\n\n\nconst BaseApi = {\n    GET: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.get(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    POST: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.post(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    PUT: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.put(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    DELETE: () => {},\n};\n\n\nexport default BaseApi;\n","import BaseApi from './BaseApi';\n\n\nconst RoomApi = {\n    getRooms: (page) => {\n        return BaseApi.GET('/rooms/available', { page: page, });\n    },\n\n    createRoom: () => {\n        return BaseApi.POST('/rooms');\n    },\n\n    joinRoom: (roomId) => {\n        return BaseApi.PUT('/rooms/join', {\n            roomId: roomId,\n        });\n    },\n};\n\n\nexport default RoomApi;\n","import Noty from 'noty';\nimport { confirmAlert } from 'react-confirm-alert';\n\n\nconst alertOptions = {\n    theme: 'sunset',\n    timeout: 1000,\n    layout: 'bottomCenter',\n    progressBar: false,\n};\n\nexport const showError = (msg) => {\n    new Noty({\n        type: 'alert',\n        text: msg,\n        ...alertOptions\n    }).show();\n};\n\n\nexport const showConfirmAlert = ({ title, message, confirmText = 'Yes', onConfirm, cancelText = 'No', onCancel}) => {\n    confirmAlert({\n        title: title,\n        message: message,\n        buttons: [\n            {\n                label: confirmText,\n                onClick: onConfirm\n            },\n            {\n                label: cancelText,\n                onClick: onCancel\n            }\n        ],\n    });\n};\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\nimport Config from 'caro-config';\nimport _ from 'lodash';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\nimport socket from 'caro-socket';\nimport { showError } from 'caro-service/AlertService';\nimport sleep from 'sleep-promise';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\n\nconst defaultState = {\n    firstMoveUserId: null,\n    winnerId: null,\n    isCurentUserTurn: false,\n    squares: {},\n    lastSquareIndex: '',\n    winningSquares: {},\n\n    currentUserReadyNewGame: false,\n    competitorUserReadyNewGame: false,\n};\n\n\nconst checkHorizontal = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count left side\n    for (let i = (column - 1); i >= 0; i--) {\n        const squareIndex = row + ',' + i;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count right side\n    for (let i = (column + 1); i < boardColumn; i++) {\n        const squareIndex = row + ',' + i;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkVertical = (row, column, squares, rootSquareType, boardRow) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let i = (row - 1); i >= 0; i--) {\n        const squareIndex = i + ',' + column;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let i = (row + 1); i < boardRow; i++) {\n        const squareIndex = i + ',' + column;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkLeftBias = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let x = (row - 1), y = (column - 1) ; x >= 0 && y >= 0; x--, y--) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let x = (row + 1), y = (column + 1) ; x < boardRow && y < boardColumn; x++, y++) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkRightBias = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let x = (row - 1), y = (column + 1) ; x >= 0 && y < boardColumn; x--, y++) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let x = (row + 1), y = (column - 1) ; x < boardRow && y >= 0; x++, y--) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\n\nexport const checkWinningMatchFromIndex = (squares, row, column) => {\n    const squareIndex = row + ',' + column;\n    const squareType = squares[squareIndex];\n    const checkers = [\n        checkHorizontal,\n        checkVertical,\n        checkLeftBias,\n        checkRightBias\n    ];\n\n    for (let i = 0; i < checkers.length; i++) {\n        const winningSquares = checkers[i](row, column, squares, squareType, Config.CARO_BOARD_ROW, Config.CARO_BOARD_COLUMN);\n        \n        if (winningSquares) {\n            return winningSquares;\n        }\n    }\n};\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const match_RESET = createAction('match_RESET');\n\nexport const match_UPDATE_STATE = createAction('match_UPDATE_STATE');\n\nexport const match_STROKE = (row, column) => async (dispatch, getState) => {\n    const { match, user, room } = getState();\n    const { isCurentUserTurn, squares, firstMoveUserId } = match;\n\n    if (!firstMoveUserId) {\n        showError('Waiting user ...');\n        return;\n    }\n\n    if (!isCurentUserTurn) {\n        showError('Not your turn!');\n        return;\n    }\n\n    const squareIndex = row + ',' + column;\n\n    if (squares[squareIndex]) {\n        return;\n    }\n\n    const { currentUser } = user;\n    const squareType = (currentUser.id === firstMoveUserId) ? Config.FIRST_MOVE_SQUARE_TYPE : Config.SECOND_MOVE_SQUARE_TYPE;\n    const currentRoom = room.rooms[room.currentRoomId];\n    const competitorUserId = currentRoom.creatorUserId === currentUser.id ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(match_UPDATE_STATE({\n        isCurentUserTurn: false,\n        squares: {\n            [squareIndex]: squareType,\n        },\n        lastSquareIndex: squareIndex,\n    }));\n\n    socket.emit(SocketClientEvents.match_STROKE, {\n        roomId: currentRoom.id,\n        row: row,\n        column: column,\n        competitorUserId: competitorUserId,\n        userId: currentUser.id,\n    });\n\n    const { match: nextMatch } = getState();\n    const winningSquares = checkWinningMatchFromIndex(nextMatch.squares, row, column);\n\n    if (winningSquares) {\n        socket.emit(SocketClientEvents.match_WIN, {\n            userId: currentUser.id,\n            competitorUserId: competitorUserId,\n        });\n\n        await sleep(2000);\n        dispatch(match_UPDATE_STATE({\n            winningSquares: winningSquares,\n            winnerId: currentUser.id,\n        }));\n    }\n};\n\nexport const match_READY_NEW_GAME = () => (dispatch, getState) => {\n    const { user, room, match } = getState();\n    const { currentUser } = user;\n\n    if (!match.winnerId) {\n        return;\n    }\n\n    const currentRoom = room.rooms[room.currentRoomId];\n    const competitorUserId = (currentRoom.creatorUserId === currentUser.id) ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    if (!currentRoom.competitorUserId) {\n        return;\n    }\n    \n    dispatch(match_UPDATE_STATE({\n        currentUserReadyNewGame: true,\n    }));\n    \n    socket.emit(SocketClientEvents.match_READY_NEW_GAME, {\n        roomId: currentRoom.id,\n        competitorUserId: competitorUserId,\n    });\n};\n\nexport const match_REMATCH = () => (dispatch, getState) => {\n    const { match, user, room } = getState();\n    const { currentUser } = user;\n    const { winnerId } = match;\n    const currentRoom = room.rooms[room.currentRoomId];\n\n    const isCurentUserTurn = (currentUser.id !== winnerId); // Loser go first\n    const competitorUserId = (currentRoom.creatorUserId === currentUser.id) ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(match_RESET({\n        isCurentUserTurn: isCurentUserTurn,\n        firstMoveUserId: isCurentUserTurn ? currentUser.id : competitorUserId,\n    }));\n};\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    match_RESET: (state, { payload }) => {\n        return {\n            ..._.cloneDeep(defaultState),\n            ...payload,\n        };\n    },\n\n    match_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const squareSelector = createSelector(\n    (match, row, column) => ({ squares: match.squares, row: row, column: column}),\n    ({ squares, row, column }) => {\n        const squareIndex = row + ',' + column;\n        return squares[squareIndex];\n    }\n);\n\nexport const winningSquareSelector = createSelector(\n    (match, row, column) => ({ winningSquares: match.winningSquares, row: row, column: column}),\n    ({ winningSquares, row, column }) => {\n        const squareIndex = row + ',' + column;\n        return winningSquares[squareIndex] || false;\n    }\n);\n\n\n\nexport default reducer;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport RoomApi from 'caro-api/RoomApi';\nimport { user_UPDATE_STATE } from './user';\nimport { match_RESET } from './match';\nimport { createSelector } from 'reselect';\nimport _ from 'lodash';\nimport RoomStatus from 'caro-shared-resource/RoomStatus';\nimport socket from 'caro-socket';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    rooms: {},\n    total: 0,\n    page: 1,\n    limit: 20,\n\n    isGettingRooms: false,\n    getRoomsError: null,\n\n    creatingRoom: false,\n    createRoomError: null,\n\n    currentRoomId: null,\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const room_UPDATE_STATE = createAction('room_UPDATE_STATE');\n\nexport const room_UPDATE_ONE = createAction('room_UPDATE_ONE');\n\nexport const room_REMOVE = createAction('room_REMOVE');\n\nexport const room_GET_ROOMS = (shouldRefresh = false) => async (dispatch, getState) => {\n    const { room } = getState();\n    const page = shouldRefresh ? 1 : (room.page + 1);\n\n    if (room.isGettingRooms) {\n        return;\n    }\n\n    if (\n        !shouldRefresh &&\n        (page - 1) * room.limit > room.total\n    ) {\n        return;\n    }\n\n    // Set loading\n    dispatch(room_UPDATE_STATE({\n        isGettingRooms: true,\n        getRoomsError: null,\n    }));\n\n    try {\n        const response = await RoomApi.getRooms(page, room.limit);\n        const { rooms: rawRooms, total, creatorUsers: rawCreatorUsers } = response;\n        \n        const creatorUsers = _.reduce(rawCreatorUsers, (memo, user) => {\n            memo[user._id] = {\n                id: user._id,\n                ...user,\n            };\n            return memo;\n        }, {});\n        dispatch(user_UPDATE_STATE({\n            otherUsers: {\n                ...creatorUsers,\n            },\n        }));\n\n        const rooms = _.reduce(rawRooms, (memo, room) => {\n            memo[room._id] = {\n                id: room._id,\n                ...room,\n            };\n            return memo;\n        }, {});\n        dispatch(room_UPDATE_STATE({\n            isGettingRooms: false,\n            rooms: rooms,\n            total: total,\n            page: page,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            isGettingRooms: false,\n            getRoomsError: error.message,\n        }));\n    }\n};\n\n\nexport const room_NEW_ROOM = () => async (dispatch) => {\n    dispatch(room_UPDATE_STATE({\n        creatingRoom: true,\n        createRoomError: null,\n    }));\n\n    try {\n       const newRoom = await RoomApi.createRoom();\n\n       dispatch(room_UPDATE_STATE({\n            rooms: {\n                [newRoom._id]: {\n                    id: newRoom._id,\n                    ...newRoom\n                }\n            },\n            currentRoomId: newRoom._id,\n            creatingRoom: false,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            creatingRoom: false,\n            createRoomError: error.message,\n        }));\n    }\n};\n\nexport const room_JOIN_ROOM = (roomId) => async (dispatch) => {\n    dispatch(room_UPDATE_STATE({\n        creatingRoom: true,\n        createRoomError: null,\n    }));\n\n    try {\n        const response = await RoomApi.joinRoom(roomId);\n        const { room: joinedRoom, creatorUser } = response;\n\n        dispatch(user_UPDATE_STATE({\n            otherUsers: {\n                [creatorUser._id]: {\n                    id: creatorUser._id,\n                    ...creatorUser,\n                }\n            }\n        }));\n        dispatch(room_UPDATE_STATE({\n            rooms: {\n                [joinedRoom._id]: {\n                    id: joinedRoom._id,\n                    ...joinedRoom\n                }\n            },\n            currentRoomId: joinedRoom._id,\n            creatingRoom: false,\n        }));\n        dispatch(match_RESET({\n            firstMoveUserId: creatorUser._id,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            creatingRoom: false,\n            createRoomError: error.message,\n        }));\n    }\n};\n\nexport const room_OUT_ROOM = () => (dispatch, getState) => {\n    const { room, user } = getState();\n    const { currentRoomId } = room;\n    const { currentUser } = user;\n\n\n    if (!currentRoomId) {\n        return;\n    }\n\n    const currentRoom = room.rooms[currentRoomId];\n    const competitorUserId = currentRoom.creatorUserId === currentUser.id ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(room_UPDATE_STATE({\n        currentRoomId: null,\n    }));\n    dispatch(match_RESET());\n\n    socket.emit(SocketClientEvents.room_EXIT, {\n        roomId: currentRoomId,\n        userId: currentUser.id,\n        competitorUserId: competitorUserId,\n    });\n};\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    room_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n\n    room_REMOVE: (state, { payload }) => {\n        const { roomId } = payload;\n        return fromJS(state)\n            .removeIn(['rooms', roomId])\n            .toJS();\n    }\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const sortedRoomIdsSelector = createSelector(\n    (room, user) => ({ rooms: room.rooms, currentUser: user.currentUser, }),\n    ({ rooms, currentUser }) => {\n        const availableRooms = _.filter(rooms, (room) => {\n            return (room.status === RoomStatus.WAITING && room.creatorUserId !== currentUser.id);\n        });\n        const sortedRooms = _.sortBy(availableRooms, (room) => {\n            return -room.updated;\n        });\n        const sortedRoomIds = _.map(sortedRooms, (room) => room.id);\n        return sortedRoomIds;\n    }\n);\n\nexport const roomSelector = createSelector(\n    (room, roomId) => ({ rooms: room.rooms, roomId: roomId, }),\n    ({ rooms, roomId }) => {\n        return rooms[roomId];\n    }\n);\n\n\n\nexport default reducer;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch, getState } from 'caro-store';\nimport { room_UPDATE_STATE, room_REMOVE } from 'caro-store/room';\nimport { user_UPDATE_STATE } from 'caro-store/user';\nimport { match_RESET } from 'caro-store/match';\n\n\nconst RoomHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.room_ADD_NEW: {\n            dispatch(user_UPDATE_STATE({\n                otherUsers: {\n                    [params.creatorUser._id]: {\n                        id: params.creatorUser._id,\n                        ...params.creatorUser,\n                    }\n                }\n            }));\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [params.room._id]: {\n                        id: params.room._id,\n                        ...params.room\n                    },\n                },\n            }));\n            break;\n        }\n        \n        case SocketServerEvents.room_REMOVE: {\n            const { roomId } = params;\n            dispatch(room_REMOVE({ roomId: roomId, }));\n            break;\n        }\n        \n        case SocketServerEvents.room_JOIN: {\n            dispatch(user_UPDATE_STATE({\n                otherUsers: {\n                    [params.competitorUser._id]: {\n                        id: params.competitorUser._id,\n                        ...params.competitorUser,\n                    }\n                }\n            }));\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [params.room._id]: {\n                        id: params.room._id,\n                        ...params.room\n                    },\n                },\n            }));\n            dispatch(match_RESET({\n                firstMoveUserId: params.room.creatorUserId,\n                isCurentUserTurn: true,\n            }));\n            break;\n        }\n\n        case SocketServerEvents.room_EXIT: {\n            const { roomId } = params;\n            const { user, room } = getState();\n            const { currentUser } = user;\n\n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [roomId]: {\n                        creatorUserId: currentUser.id,\n                        competitorUserId: null,\n                    },\n                },\n            }));\n            dispatch(match_RESET({\n                firstMoveUserId: null,\n            }));\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default RoomHandler;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch, getState } from 'caro-store';\nimport { match_UPDATE_STATE, checkWinningMatchFromIndex } from 'caro-store/match';\nimport Config from 'caro-config';\nimport sleep from 'sleep-promise';\n\n\nconst RoomHandler = async (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.match_STROKE: {\n            const { roomId, row, column, competitorUserId } = params;\n            const { room, match, user } = getState();\n            \n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            const { currentUser } = user;\n            const { firstMoveUserId } = match;\n            const competitorSquareIndex = row + ',' + column;\n            const competitorSquareType = currentUser.id === firstMoveUserId ? Config.SECOND_MOVE_SQUARE_TYPE : Config.FIRST_MOVE_SQUARE_TYPE;\n\n            dispatch(match_UPDATE_STATE({\n                squares: {\n                    [competitorSquareIndex]: competitorSquareType,\n                },\n                lastSquareIndex: competitorSquareIndex,\n            }));\n\n            const { match: nextMatch } = getState();\n            const winningSquares = checkWinningMatchFromIndex(nextMatch.squares, row, column);\n\n            if (winningSquares) {\n                await sleep(2000);\n                dispatch(match_UPDATE_STATE({\n                    winningSquares: winningSquares,\n                    winnerId: competitorUserId,\n                }));\n            } else {\n                dispatch(match_UPDATE_STATE({\n                    isCurentUserTurn: true,\n                }));\n            }\n            break;\n        }\n\n        case SocketServerEvents.match_READY_NEW_GAME: {\n            const { roomId } = params;\n            const { room } = getState();\n            \n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            dispatch(match_UPDATE_STATE({\n                competitorUserReadyNewGame: true,\n            }));\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default RoomHandler;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\n// import _ from 'lodash';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    scores: {}, // [currentUserId,competitorUserId]: number\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const score_UPDATE_STATE = createAction('score_UPDATE_STATE');\n\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    score_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const scoreSelector = createSelector(\n    (score, userId, competitorUserId) => ({ scores: score.scores, userId: userId, competitorUserId: competitorUserId }),\n    ({ scores, userId, competitorUserId }) => {\n        const scoreKey = userId + ',' + competitorUserId;\n        return scores[scoreKey] || 0;\n    }\n);\n\n\n\nexport default reducer;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch } from 'caro-store';\nimport { score_UPDATE_STATE } from 'caro-store/score';\nimport _ from 'lodash';\n\n\nconst ScoreHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.score_UPDATE: {\n            const { scores: rawScores } = params;\n            const scores = _.reduce(rawScores, (memo, item) => {\n                const { userId, competitorUserId, score } = item;\n                const scoreKey = userId + ',' + competitorUserId;\n                memo[scoreKey] = score;\n                return memo;\n            }, {});\n            dispatch(score_UPDATE_STATE({\n                scores: {\n                    ...scores,\n                },\n            }))\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default ScoreHandler;\n","import io from 'socket.io-client';\nimport socketWildcard from 'socketio-wildcard';\nimport Config from 'caro-config';\nimport _ from 'lodash';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\n\nimport combineHandlers from './combineHandlers';\nimport UserHandler from './UserHandler';\nimport RoomHandler from './RoomHandler';\nimport MatchHandler from './MatchHandler';\nimport ScoreHandler from './ScoreHandler';\nimport { getState } from 'caro-store';\n\n\nconst socket = io(Config.SOCKET_SERVER_URL);\nsocketWildcard(io.Manager)(socket);\n\nconst eventHandler = combineHandlers([\n    UserHandler,\n    RoomHandler,\n    MatchHandler,\n    ScoreHandler\n]);\n\n\nsocket.on('connect', function () {\n    const { user } = getState();\n    const token = _.get(user, ['currentUser', 'token']);\n\n    if (token) {\n        socket.emit(SocketClientEvents.user_AUTHENTICATE, { token: token, });\n    }\n\n    socket.on('*', ({ data }) => {\n        const [ eventName, params ] = data;\n        eventHandler(eventName, params);\n        // console.log('socket: ', eventName, params);\n    });\n});\n\n\nexport default socket;\n","import BaseApi from './BaseApi';\n\n\nconst UserApi = {\n    login: ({ accessToken, facebookId }) => {\n        return BaseApi.POST('/users/facebook/login', {\n            accessToken: accessToken,\n            facebookId: facebookId,\n        });\n    },\n};\n\n\nexport default UserApi;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\nimport _ from 'lodash';\nimport socket from 'caro-socket';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\nimport UserApi from 'caro-api/UserApi';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    otherUsers: {},\n    currentUser: {},\n\n    isSocketAuthenticated: false,\n    isSocketAuthenticating: false,\n\n    isLogging: false,\n    loginError: null,\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const user_RESET = createAction('user_RESET');\n\nexport const user_UPDATE_STATE = createAction('user_UPDATE_STATE');\n\nexport const user_LOGIN = ({ accessToken, facebookId }) => async (dispatch) => {\n    // Loading\n    dispatch(user_UPDATE_STATE({ isLogging: true, loginError: null, }));\n\n    try {\n        const response = await UserApi.login({ accessToken: accessToken, facebookId: facebookId, });\n        \n        // Update current user\n        dispatch(user_UPDATE_STATE({\n            isLogging: false,\n            isSocketAuthenticating: true,\n            currentUser: {\n                id: response._id,\n                facebookId: response.facebookId,\n                username: response.username,\n                avatar: response.avatar,\n                token: response.token,\n            },\n        }));\n    } catch (error) {\n        dispatch(user_UPDATE_STATE({\n            isLogging: false,\n            loginError: error.message,\n        }));\n    }\n};\n\nexport const user_SOCKET_AUTHENTICATE = () => (dispatch, getState) => {\n    const { user } = getState();\n    const token = _.get(user, ['currentUser', 'token']);\n\n    dispatch(user_UPDATE_STATE({\n        isSocketAuthenticated: false,\n        isSocketAuthenticating: true,\n    }));\n    socket.emit(SocketClientEvents.user_AUTHENTICATE, { token: token, });\n};\n\nexport const user_LOGOUT = () => (dispatch) => {\n    dispatch(user_UPDATE_STATE({\n        currentUser: {\n            token: '',\n        },\n        isSocketAuthenticated: false,\n    }));\n    socket.emit(SocketClientEvents.user_LOGOUT);\n};\n\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    user_RESET: (state, { payload }) => {\n        return {\n            ..._.cloneDeep(defaultState),\n            ...payload,\n        };\n    },\n\n    user_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const otherUserSelector = createSelector(\n    (user, userId) => ({ otherUsers: user.otherUsers, userId: userId, }),\n    ({ otherUsers, userId }) => {\n        return otherUsers[userId];\n    }\n);\n\n\n\n\nexport default reducer;\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\n\n// reducers\nimport globalReducer from './user';\nimport roomReducer from './room';\nimport userReducer from './user';\nimport matchReducer from './match';\nimport scoreReducer from './score';\n\n\nconst reducers = combineReducers({\n    global: globalReducer,\n    room: roomReducer,\n    user: persistReducer({\n        key: 'user',\n        storage: storage,\n        whitelist: ['currentUser'],\n    }, userReducer),\n    match: matchReducer,\n    score: scoreReducer,\n});\n\n\nconst middleWares = [thunk];\n\nif (process.env.NODE_ENV === 'development') {\n    const { logger } = require(`redux-logger`);\n    middleWares.push(logger);\n}\n\nconst composeEnhancers =\n    typeof window === 'object' &&\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV) ?   \n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n        (middleWares) => middleWares;\n\nconst enhancer = composeEnhancers (\n  applyMiddleware(...middleWares),\n);\n\nconst store = createStore(\n    reducers,\n    enhancer\n);\n\n\nexport const persistor = persistStore(store);\n\nexport const dispatch = store.dispatch;\nexport const getState = store.getState;\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PacmanLoader } from 'react-spinners';\n\nconst spinnerId = 'caro-spinner';\n\n\nexport const showSpinner = () => {\n    if (document.getElementById(spinnerId)) {\n        return;\n    }\n\n    const overlayElement = document.createElement('div');\n    overlayElement.id = spinnerId;\n    document.body.appendChild(overlayElement);\n\n    ReactDOM.render(\n        <div className=\"caro-spinner-container\">\n            <PacmanLoader color=\"#95a5a6\" size={ 25 } />\n        </div>,\n        document.getElementById(spinnerId)\n    );\n};\n\n\nexport const hideSpinner = () => {\n    const spinnerElement = document.getElementById(spinnerId);\n\n    if (!spinnerElement) {\n        return;\n    }\n    \n    document.getElementById(spinnerId).remove();\n};\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport { user_LOGIN } from 'caro-store/user';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\n\nimport './LoginScreen.scss';\n\n\nclass LoginScreen extends PureComponent {\n\n    componentWillMount() {\n        if (this.props.token) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.isLogging && this.props.isLogging) {\n            showSpinner();\n        }\n\n        if (prevProps.isLogging && !this.props.isLogging) {\n            hideSpinner();\n        }\n\n        if (this.props.token) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    onLoginButtonPressed() {\n        const FB = window.FB;\n\n        FB.login(() => {\n            FB.getLoginStatus((response) => {\n                if (response.status !== 'connected') {\n                    return;\n                }\n\n                const { authResponse } = response;\n                const { accessToken, userID: facebookId } = authResponse;\n\n                this.props._login(accessToken, facebookId);\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div id=\"login-screen\">\n                <h1>Caro online</h1>\n\n                {/* Facebook login button */}\n                <button className=\"loginBtn loginBtn--facebook\" onClick={() => this.onLoginButtonPressed()}>\n                    Login with Facebook\n                </button>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }) => ({\n    token: _.get(user, ['currentUser', 'token']),\n    isLogging: user.isLogging,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _login: (accessToken, facebookId) => {\n        return dispatch(user_LOGIN({\n            accessToken: accessToken,\n            facebookId: facebookId,\n        }));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginScreen);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { otherUserSelector } from 'caro-store/user';\n\n\nclass CreatorName extends PureComponent {\n\n    render() {\n        const { user } = this.props;\n\n        if (!user) {\n            return null;\n        }\n\n        return (\n            <span>\n                { user.username }\n            </span>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }, ownProps) => ({\n    user: otherUserSelector(user, ownProps.userId),\n});\n\n\nexport default connect(mapStateToProps)(CreatorName);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport CreatorName from './CreatorName';\nimport { roomSelector, room_JOIN_ROOM } from 'caro-store/room';\n\nclass RoomItem extends PureComponent {\n\n    onRoomItemClicked = () => {\n        const { room } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        this.props._joinRoom(room.id);\n    }\n\n    render() {\n        const { room } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        return (\n            <tr className=\"room-item\" onClick={ this.onRoomItemClicked }>\n                <td>\n                    <CreatorName userId={ room.creatorUserId } />\n                </td>\n                <td className=\"text-right\">1/2</td>\n            </tr>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room }, ownProps) => ({\n    room: roomSelector(room, ownProps.roomId),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _joinRoom: (roomId) => {\n        return dispatch(room_JOIN_ROOM(roomId));\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomItem);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { BeatLoader } from 'react-spinners';\n\nimport ServerError from 'caro-shared-resource/ServerError';\nimport { room_GET_ROOMS, sortedRoomIdsSelector, room_NEW_ROOM } from 'caro-store/room';\nimport { user_LOGOUT, user_SOCKET_AUTHENTICATE } from 'caro-store/user';\nimport RoomItem from './RoomItem';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\n\nimport './RoomScreen.scss';\n\n\nclass RoomScreen extends PureComponent {\n\n    componentWillMount() {\n        if (!this.props.token) {\n            this.props.history.push('/');\n        }\n    }\n\n    componentDidMount() {\n        if (!this.props.isSocketAuthenticated) {\n            this.props._socketAuthenticate();\n        } else {\n            this.props._getRooms(true);\n        }\n\n        document.addEventListener('scroll', this.trackScrolling);\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.isSocketAuthenticated && this.props.isSocketAuthenticated) {\n            this.props._getRooms(true);\n        }\n\n        if (!prevProps.isSocketAuthenticating && this.props.isSocketAuthenticating) {\n            showSpinner();\n        }\n\n        if (prevProps.isSocketAuthenticating && !this.props.isSocketAuthenticating) {\n            hideSpinner();\n            if (!this.props.isSocketAuthenticated) {\n                this.props._logout();\n                this.props.history.push('/');\n            }\n        }\n\n        if (!prevProps.creatingRoom && this.props.creatingRoom) {\n            showSpinner();\n        }\n\n        if (prevProps.creatingRoom && !this.props.creatingRoom) {\n            hideSpinner();\n        }\n\n        if (!prevProps.currentRoomId && this.props.currentRoomId) {\n            this.props.history.push('match');\n        }\n\n        if (!prevProps.getRoomsError && this.props.getRoomsError) {\n            console.log(this.props.getRoomsError);\n            if (this.props.getRoomsError === ServerError.UNAUTHENTICATED) {\n                this.props._logout();\n                this.props.history.push('/');\n                return;\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('scroll', this.trackScrolling);\n    }\n\n    isBottom(el) {\n        return el.getBoundingClientRect().bottom <= window.innerHeight;\n    }\n\n    trackScrolling = () => {\n        const wrappedElement = document.getElementById('room-screen-container');\n\n        if (this.isBottom(wrappedElement)) {\n            this.props._getRooms();\n        }\n    };\n\n    onNewRoomButtonClicked = () => {\n        this.props._createRoom();\n    }\n\n    onLogoutButtonClicked = () => {\n        this.props._logout();\n        this.props.history.push('/');\n    }\n\n\n    render() {\n        const { roomIds, isGettingRooms } = this.props;\n\n        return (\n            <div id=\"room-screen\">\n                <div id=\"room-screen-container\" className=\"container grid-sm\">\n                    <div className=\"room-status-container\">\n                        {/* New room button */}\n                        <button className=\"add-button\" onClick={ this.onNewRoomButtonClicked }>New room</button>\n\n                        {/* Total room status */}\n                        {/* <span>Total rooms: { totalRooms }</span> */}\n\n                        {/* Logout button */}\n                        <button className=\"btn btn-link\" onClick={ this.onLogoutButtonClicked }>Logout</button>\n                    </div>\n\n                    {/* List rooms */}\n                    <table className=\"table table-hover\">\n                        <tbody>\n                            {_.map(roomIds, (roomId) => (\n                                <RoomItem key={ roomId } roomId={ roomId } />\n                            ))}\n                        </tbody>\n                    </table>\n\n                    <div className=\"spinner\">\n                        <BeatLoader size={ 8 } color=\"#95a5a6\" loading={ isGettingRooms } />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room, user }) => ({\n    token: _.get(user, ['currentUser', 'token']),\n    isSocketAuthenticated: user.isSocketAuthenticated,\n    isSocketAuthenticating: user.isSocketAuthenticating,\n\n    totalRooms: room.total,\n    roomIds: sortedRoomIdsSelector(room, user),\n\n    isGettingRooms: room.isGettingRooms,\n    getRoomsError: room.getRoomsError,\n\n    creatingRoom: room.creatingRoom,\n\n\n    currentRoomId: room.currentRoomId,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _getRooms: (shouldRefresh) => {\n        return dispatch(room_GET_ROOMS(shouldRefresh));\n    },\n    _createRoom: () => {\n        return dispatch(room_NEW_ROOM());\n    },\n    _socketAuthenticate: () => {\n        return dispatch(user_SOCKET_AUTHENTICATE());\n    },\n    _logout: () => {\n        return dispatch(user_LOGOUT());\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomScreen);\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\n\nimport { SquareType } from 'caro-config';\nimport { squareSelector, winningSquareSelector, match_STROKE } from 'caro-store/match';\nimport oImage from 'caro-assets/images/o.png';\nimport xImage from 'caro-assets/images/x.png';\n\nimport './CaroBoardSquare.scss';\n\n\nclass CaroBoardSquare extends PureComponent {\n\n    stroke = () => {\n        const { row, column } = this.props;\n        this.props._stroke(row, column);\n    }\n\n    renderXO = () => {\n        const { squareType } = this.props;\n\n        if (!squareType) {\n            return null;\n        }\n\n        return (\n            <Fragment>\n                {squareType === SquareType.O ? (\n                    <img className=\"caro-board-image\" alt=\"o\" src={ oImage } />\n                ) : (\n                    <img className=\"caro-board-image\" alt=\"x\" src={ xImage } />\n                )}\n            </Fragment>\n        );\n    }\n\n    render() {\n        const { isWinningSquare, isLastSquare } = this.props;\n\n        return (\n            <div\n                id=\"caro-board-square\"\n                className={classNames({\n                    'square-winning': isWinningSquare,\n                    'square-last-index': isLastSquare,\n                })}\n                onClick={ this.stroke }\n            >\n                { this.renderXO() }\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ match }, ownProps) => ({\n    squareType: squareSelector(match, ownProps.row, ownProps.column),\n    isWinningSquare: winningSquareSelector(match, ownProps.row, ownProps.column),\n    isLastSquare: match.lastSquareIndex === (ownProps.row + ',' + ownProps.column),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _stroke: (row, column) => {\n        return dispatch(match_STROKE(row, column));\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaroBoardSquare);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport Config from 'caro-config';\nimport CaroBoardSquare from './CaroBoardSquare';\n\nimport './CaroBoard.scss';\n\n\nclass CaroBoard extends PureComponent {\n\n    render() {\n        return (\n            <div id=\"caro-board\">\n                {/* Render row */}\n                {_.map(new Array(Config.CARO_BOARD_ROW), (row, rowIndex) => (\n                    <div className=\"caro-board-row\" key={ rowIndex }>\n                        {/* Render column */}\n                        {_.map(new Array(Config.CARO_BOARD_COLUMN), (col, columnIndex) => (\n                            <CaroBoardSquare key={ columnIndex } row={ rowIndex } column={ columnIndex } />\n                        ))}\n                    </div>\n                ))}\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = () => ({\n\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaroBoard);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { scoreSelector } from 'caro-store/score';\n\n\nclass UserScore extends PureComponent {\n\n    render() {\n        const { score } = this.props;\n\n        return (\n            <div className=\"chip\">\n                Wins: { score }\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ score }, ownProps) => ({\n    score: scoreSelector(score, ownProps.userId, ownProps.competitorUserId),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserScore);\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport { otherUserSelector } from 'caro-store/user';\nimport UserScore from './UserScore';\n\nimport './CompetitorUser.scss';\n\n\nclass CompetitorUser extends PureComponent {\n\n    render() {\n        const { competitorUser, userId, isCurentUserTurn } = this.props;\n\n        return (\n            <div id=\"current-user\">\n                {competitorUser ? (\n                    <Fragment>\n                        <img className=\"user-avatar\" alt=\"avatar\" src={ competitorUser.avatar } />\n                        <p className=\"user-name text-bold\">\n                            { competitorUser.username }\n\n                            {/* Competitor turn status */}\n                            {!isCurentUserTurn ? (\n                                <i className=\"fas fa-user-clock user-current-turn-icon\"></i>\n                            ) : null}\n                        </p>\n                        \n                        <UserScore userId={ competitorUser.id } competitorUserId={ userId } />\n\n                        {/* Toolbox */}\n                        <div className=\"tool-box\">\n                            \n                        </div>\n                    </Fragment>\n                ) : (\n                    <p>Waiting user...</p>\n                )}\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user, match }, ownProps) => ({\n    competitorUser: otherUserSelector(user, ownProps.competitorUserId),\n    isCurentUserTurn: match.isCurentUserTurn,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CompetitorUser);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport UserScore from './UserScore';\nimport './CurrentUser.scss';\n\n\nclass CurrentUser extends PureComponent {\n\n    render() {\n        const { currentUser, competitorUserId, isCurentUserTurn } = this.props;\n\n        return (\n            <div id=\"current-user\">\n                <img className=\"user-avatar\" alt=\"avatar\" src={ currentUser.avatar } />\n                <p className=\"user-name text-bold\">\n                    { currentUser.username }\n\n                    {/* Current turn status */}\n                    {isCurentUserTurn ? (\n                        <i className=\"fas fa-user-clock user-current-turn-icon\"></i>\n                    ) : null}\n                </p>\n                \n                <UserScore userId={ currentUser.id } competitorUserId={ competitorUserId } />\n\n                {/* Toolbox */}\n                <div className=\"tool-box\">\n                    \n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user, match }) => ({\n    currentUser: user.currentUser,\n    isCurentUserTurn: match.isCurentUserTurn,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CurrentUser);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showConfirmAlert } from 'caro-service/AlertService';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\nimport { roomSelector, room_OUT_ROOM } from 'caro-store/room';\nimport { match_READY_NEW_GAME, match_REMATCH } from 'caro-store/match';\nimport CaroBoard from './CaroBoard';\nimport CompetitorUser from './CompetitorUser';\nimport CurrentUser from './CurrentUser';\n\nimport './MatchScreen.scss';\n\n\nclass MatchScreen extends PureComponent {\n\n    componentWillMount() {\n        if (!this.props.room) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('popstate', this.onBackButtonPressed, false);\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            history,\n            winnerId,\n            currentUser,\n            currentUserReadyNewGame,\n            competitorUserReadyNewGame,\n            room,\n            _playNewGame,\n            _reMatch,\n            _exitRoom,\n        } = this.props;\n\n        if (prevProps.room && !room) {\n            history.push('/rooms');\n            return;\n        }\n\n        if (!prevProps.winnerId && winnerId) {\n            const didCurrentUserWin = (winnerId === currentUser.id);\n            const title = didCurrentUserWin ? 'You win' : 'You lose';\n\n            showConfirmAlert({\n                title: title,\n                message: 'Play new game?',\n                cancelText: 'Exit room',\n                onConfirm: () => {\n                    _playNewGame();\n                },\n                onCancel: () => {\n                    _exitRoom();\n                }, // Out room\n            });\n        }\n\n        if (!prevProps.currentUserReadyNewGame && currentUserReadyNewGame) {\n            showSpinner();\n        }\n\n        if (prevProps.currentUserReadyNewGame && !currentUserReadyNewGame) {\n            hideSpinner();\n        }\n\n        if (\n            currentUserReadyNewGame &&\n            competitorUserReadyNewGame &&\n            (!prevProps.currentUserReadyNewGame || !prevProps.competitorUserReadyNewGame)\n        ) {\n            _reMatch();\n        }\n    }\n\n    onBackButtonPressed = () => {\n        this.props._exitRoom();\n    }\n    \n    onExitRoomButtonClicked = () => {\n        this.props._exitRoom();\n    }\n\n    render() {\n        const { room, currentUser } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        const competitorUserId = room.creatorUserId === currentUser.id ? room.competitorUserId : room.creatorUserId;\n\n\n        return (\n            <div id=\"match-screen\">\n                <CaroBoard />\n\n                {/* Users info */}\n                <div className=\"user-container\">\n                    <CompetitorUser userId={ currentUser.id } competitorUserId={ competitorUserId } />\n                    <CurrentUser competitorUserId={ competitorUserId } />\n\n                    {/* Exit room button */}\n                    <button className=\"exit-button\" onClick={ this.onExitRoomButtonClicked }>\n                        <i className=\"fas fa-sign-out-alt fa-lg text-dark\"></i>\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room, user, match }) => ({\n    room: roomSelector(room, room.currentRoomId),\n    currentUser: user.currentUser,\n    winnerId: match.winnerId,\n    currentUserReadyNewGame: match.currentUserReadyNewGame,\n    competitorUserReadyNewGame: match.competitorUserReadyNewGame,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _playNewGame: () => {\n        return dispatch(match_READY_NEW_GAME());\n    },\n    _reMatch: () => {\n        return dispatch(match_REMATCH());\n    },\n    _exitRoom: () => {\n        return dispatch(room_OUT_ROOM());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MatchScreen);\n","import React, { PureComponent } from 'react';\nimport { HashRouter, Route } from 'react-router-dom';\n\n// Screens\nimport LoginScreen from 'caro-screens/LoginScreen/LoginScreen';\nimport RoomsScreen from 'caro-screens/RoomScreen/RoomScreen';\nimport MatchScreen from 'caro-screens/MatchScreen/MatchScreen';\n\nexport default class Router extends PureComponent {\n    render() {\n        return (\n            <HashRouter>\n                <div id=\"router\">\n                    <Route path=\"/\" exact component={ LoginScreen } />\n                    <Route path=\"/rooms\" exact component={ RoomsScreen } />\n                    <Route path=\"/match\" exact component={ MatchScreen } />\n                </div>\n            </HashRouter>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nimport store, { persistor } from 'caro-store';\nimport Router from './Router';\n\n// Reset css\nimport 'normalize.css';\n\n// Spectre css framework\nimport 'spectre.css/dist/spectre.min.css';\nimport 'spectre.css/dist/spectre-exp.min.css';\nimport 'spectre.css/dist/spectre-icons.min.css';\n\n// Caro style\nimport 'caro-styles/index.scss';\n\n// React confirm alert\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\n\n// Run socket\nimport 'caro-socket';\n\n\nclass App extends Component {\n    render() {\n        return (\n            <Provider store={ store }>\n                <PersistGate loading={ null } persistor={ persistor }>\n                    <Router />\n                </PersistGate>\n            </Provider>\n        );\n    }\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","const combineHandlers = (handlers = []) => {\n    return (eventName, params) => {\n        for (let i = 0; i < handlers.length; i++) {\n            setImmediate(() => {\n                handlers[i](eventName, params);\n            });\n        }\n    };\n};\n\n\nexport default combineHandlers;","module.exports = {\n  WAITING: 'WAITING',\n  PLAYING: 'PLAYING'\n};","module.exports = {\n  UNAUTHENTICATED: 'UNAUTHENTICATED',\n  USER_NOT_FOUND: 'USER_NOT_FOUND',\n  ROOM_FULL: 'ROOM_FULL'\n};","module.exports = __webpack_public_path__ + \"static/media/o.11a067f2.png\";","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}